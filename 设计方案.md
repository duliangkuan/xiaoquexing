# 小确幸日记网站设计方案

## 一、项目概述

一个简洁的单页面日记网站，包含三个核心功能：记录小确幸（日记）、查看历史小确幸、树洞倾诉功能。

## 二、技术架构

### 2.1 前端技术栈
- **HTML5** + **CSS3** + **JavaScript（ES6+）**
- **响应式设计**，支持移动端和桌面端
- **CSS动画**：漂流瓶浮动动画、按钮交互效果、页面过渡动画
- **Canvas/SVG**：漂流瓶图标绘制（可选，也可使用图标库或图片）
- **LocalStorage**：本地草稿自动保存功能
- **Modal对话框**：查看历史和树洞功能的弹窗实现

### 2.2 后端技术栈
- **Node.js** + **Express.js**：轻量级后端框架
- **SQLite**：轻量级数据库（易于部署）或 **MongoDB Atlas**（云数据库）
- **Nodemailer**：SMTP邮件发送服务

### 2.3 功能模块划分

#### 模块1：小确幸记录（日记功能）- 中央主编辑区
- **位置**：屏幕中央，垂直和水平居中
- **功能**：
  - 大型文本编辑区（支持多行文本）
  - 自动显示当前日期（如：2024年3月15日 星期五）
  - 自动保存草稿到本地存储（防止意外丢失）
  - "保存小确幸"按钮（编辑区下方中央）
  - 保存时自动记录当前日期和时间到数据库
  - 保存成功后显示温馨的成功提示

#### 模块2：查看历史小确幸 - 右上角入口
- **位置**：右上角（小图标按钮，如日历图标 📅）
- **功能**：
  - 点击后弹出模态框（Modal）
  - 密码输入框（默认密码：admin888888）
  - "查看历史"按钮
  - 显示历史日记列表（按日期倒序排列）
  - 每条记录显示：日期 + 内容
  - 支持滚动查看
  - 每条记录可展开/收起查看详情

#### 模块3：树洞倾诉 - 右下角漂流瓶按钮
- **位置**：右下角固定浮动（Fixed Position）
- **样式**：漂流瓶外观（CSS绘制或图片）
- **功能**：
  - 点击漂流瓶按钮后弹出树洞对话框（模态框或侧边栏）
  - 文本输入框（支持多行文本）
  - "倾诉"按钮
  - 点击后通过SMTP发送邮件到指定QQ邮箱
  - 发送成功后显示温馨的成功提示（如："你的心声已经传达到远方 ✉️"）
  - 漂流瓶发送成功后有闪烁动画

## 三、界面设计

### 3.1 整体布局结构

采用**居中主编辑区 + 浮动功能按钮**的设计理念，营造沉浸式写作体验。整体布局简洁优雅，焦点集中在中央编辑区，功能按钮以不打扰的方式分布在角落。

```
┌──────────────────────────────────────────────┐
│                                              │
│         [右上角：查看历史入口]                │
│                                              │
│    ┌────────────────────────────────────┐    │
│    │                                    │    │
│    │      📖 记录今天的小确幸           │    │
│    │      ───────────────────           │    │
│    │                                    │    │
│    │    [可编辑的文本区域 - 中央焦点]   │    │
│    │                                    │    │
│    │    支持富文本编辑，自动保存草稿    │    │
│    │                                    │    │
│    │                                    │    │
│    │         [保存小确幸 💕]            │    │
│    │                                    │    │
│    └────────────────────────────────────┘    │
│                                              │
│                           [漂流瓶按钮 🫧]    │
│                              (右下角固定)    │
│                                              │
└──────────────────────────────────────────────┘
```

### 3.2 详细布局说明

#### 3.2.1 中央主编辑区
- **位置**：屏幕中央，垂直和水平居中，响应式定位
- **尺寸**：响应式宽度（桌面端最大800px，平板端90%宽度，移动端95%宽度），自适应高度
- **样式**：
  - **卡片设计**：
    - 柔和的圆角卡片设计（圆角半径 20px）
    - 背景色：#FFFBFB（几乎白色，带有极淡的粉色）
    - 柔和的阴影：`box-shadow: 0 8px 32px rgba(255, 182, 193, 0.15)`
    - 极细的粉色边框（可选）或仅使用阴影
    - 内边距：30px（桌面端），20px（移动端）
  - **标题区域**：
    - 显示"📖 记录今天的小确幸"
    - 字体大小：24px（桌面端），20px（移动端）
    - 颜色：#E91E63（粉红色）
    - 字体粗细：500（中等）
    - 底部边距：15px
  - **日期显示**：
    - 自动显示当前日期（如：2024年3月15日 星期五）
    - 字体大小：14px
    - 颜色：#C97D9E（紫粉色）
    - 字体样式：斜体（可选）
    - 底部边距：20px
- **文本编辑区**：
  - 大尺寸可编辑文本框（推荐使用 `contenteditable` div 或 `textarea`）
  - **样式**：
    - 宽度：100%
    - 最小高度：400px（桌面端），300px（移动端）
    - 内容超出时自动扩展（max-height: 600px，超出后出现滚动条）
    - 内边距：20px
    - 边框：无边框或极细的浅灰色边框
    - 背景色：白色或极淡的粉色（#FFFEFE）
    - 圆角：10px
  - **文字样式**：
    - 字体大小：16px（桌面端），14px（移动端）
    - 行高：1.8（宽松的行距，舒适的阅读体验）
    - 颜色：#4A4A4A（温和的深灰色）
    - 字体家族：系统字体（Microsoft YaHei, PingFang SC等）
  - **占位符提示**：
    - 文字："写下今天让你感到幸福的小事..."
    - 颜色：#D4A5A5（淡粉灰色）
    - 字体样式：斜体
  - **功能**：
    - 支持多行输入，自动换行
    - 自动保存草稿到本地存储（每5秒或失去焦点时）
    - 支持常用的文本格式（粗体、斜体等，如果使用contenteditable）

#### 3.2.2 保存按钮
- **位置**：编辑区下方中央
- **样式**：圆形或圆角按钮，带有图标（心形或星星）
- **交互**：点击时有轻微放大动画，保存成功后显示成功提示

#### 3.2.3 查看历史入口
- **位置**：右上角（小图标按钮）
- **样式**：小图标按钮（如日历图标 📅）
- **交互**：点击后弹出模态框（Modal）
  - 密码输入框
  - "查看历史"按钮
  - 历史日记列表（滚动查看）
  - 每条记录显示日期和内容，可点击查看详情

#### 3.2.4 树洞漂流瓶按钮
- **位置**：右下角固定浮动（Fixed Position），距离右边缘 30px，距离底部 30px
- **样式**：
  - **漂流瓶外观**：使用CSS绘制或图片
  - **瓶身设计**：
    - 上半部分：半透明蓝色玻璃质感（#B3E5FC，透明度70%）
    - 瓶口：粉红色瓶塞（#FFC1CC）
    - 光泽效果：白色高光，营造玻璃质感
    - 可选的瓶内气泡效果（CSS动画）
  - **动画效果**：
    - 轻微浮动动画（上下缓慢移动 10px，3秒循环，营造漂流感）
    - 悬停时发光效果（阴影扩散，颜色变亮）
    - 点击时轻微放大并弹回（弹性动画）
  - **尺寸**：桌面端 80px × 120px，移动端 60px × 90px（响应式调整）
  - **阴影**：柔和的蓝色阴影 `rgba(179, 229, 252, 0.4)`
- **交互**：
  - 点击后弹出树洞对话框（模态框）
  - 对话框样式：
    - 背景：半透明暖色背景（模糊效果）
    - 内容区：白色卡片，圆角设计
    - 标题："树洞倾诉 💌"
    - 文本输入区（支持多行）
    - "倾诉"按钮（粉红色渐变）
  - 发送成功后：
    - 显示成功提示："你的心声已经传达到远方 ✉️"
    - 漂流瓶有闪烁动画（2秒）
    - 对话框自动关闭（2秒后）

### 3.3 视觉风格设计

#### 3.3.1 配色方案（暖色调，少女心，安全感）

**主色调：**
- **背景渐变**：从 #FFF5F5（淡粉白）到 #FFE5E5（浅粉红）的柔和渐变
- **主卡片背景**：#FFFBFB（几乎白色，带有极淡的粉色）
- **强调色**：#FFB6C1（浅粉色）和 #FFC0CB（粉色）
- **辅助色**：#FFE4E1（淡珊瑚色）和 #FFF0F5（薰衣草粉色）

**文字颜色：**
- **主文字**：#4A4A4A（温和的深灰色，不刺眼）
- **标题文字**：#E91E63（粉红色）
- **日期文字**：#C97D9E（紫粉色）
- **占位符文字**：#D4A5A5（淡粉灰色）

**漂流瓶颜色：**
- **瓶身**：半透明蓝色 #B3E5FC（天空蓝，透明度70%）
- **瓶口**：#FFC1CC（粉红色）
- **光泽效果**：白色高光，营造玻璃质感

**按钮颜色：**
- **保存按钮**：渐变从 #FFB6C1 到 #FFC0CB
- **查看历史按钮**：淡紫色 #E1BEE7
- **悬浮阴影**：柔和的粉色阴影 rgba(255, 182, 193, 0.3)

#### 3.3.2 字体设计
- **中文字体**：优先使用系统字体（如 "Microsoft YaHei", "PingFang SC"）
- **英文数字字体**：优雅的衬线或无衬线字体
- **标题字号**：24-28px（"记录今天的小确幸"）
- **正文字号**：16-18px（舒适的阅读体验）
- **行高**：1.6-1.8（宽松的行距）

#### 3.3.3 装饰元素
- **背景装饰**：
  - **主背景**：从 #FFF5F5（淡粉白）到 #FFE5E5（浅粉红）的柔和渐变
  - **装饰图案**（可选）：
    - 微妙的点点图案（极淡的粉色点，透明度10-15%）
    - 极淡的云朵图案（柔和的粉白色）
    - 极淡的星星、爱心等装饰元素（透明度5-10%）
    - 可选：轻微的动态效果（如星星闪烁，但不抢夺主内容焦点）
  - **不抢夺主内容的视觉焦点**，所有装饰元素都很微妙
- **页面整体氛围**：
  - 温暖、安全、舒适的视觉感受
  - 柔和的渐变背景营造温馨氛围
  - 所有元素采用圆角设计，避免尖锐感
  - 充足的留白空间，营造轻松感
- **卡片设计**：
  - 柔和的阴影：`box-shadow: 0 8px 32px rgba(255, 182, 193, 0.15)`
  - 边框：极细的粉色边框或仅使用阴影
- **动画效果**：
  - 页面加载时淡入动画
  - 按钮点击时的弹性动画
  - 漂流瓶的轻微浮动动画（上下移动，循环）
  - 保存成功时的花瓣飘落或星星闪烁动画（可选）

#### 3.3.4 响应式设计
- **桌面端**（>1024px）：完整布局，漂流瓶尺寸较大
- **平板端**（768px-1024px）：编辑区宽度调整，漂流瓶尺寸适中
- **移动端**（<768px）：编辑区全宽，漂流瓶尺寸缩小，查看历史按钮位置调整

### 3.4 交互体验优化

1. **自动保存草稿**：用户在输入时自动保存到本地存储，防止意外丢失
2. **保存成功反馈**：显示淡入淡出的成功提示，3秒后自动消失
3. **密码输入提示**：查看历史时，密码错误有友好的错误提示
4. **历史记录展示**：每条记录可展开/收起，支持搜索功能（可选）
5. **树洞倾诉**：发送成功后显示温馨的提示信息（如："你的心声已经传达到远方 ✉️"）

## 四、数据库设计

### 4.1 小确幸表（diaries）
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | INTEGER PRIMARY KEY | 自增ID |
| content | TEXT | 日记内容 |
| date | DATETIME | 创建日期时间 |
| created_at | DATETIME | 记录创建时间 |

### 4.2 树洞记录表（treehole_logs）
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | INTEGER PRIMARY KEY | 自增ID |
| content | TEXT | 倾诉内容 |
| sent_at | DATETIME | 发送时间 |

## 五、API接口设计

### 5.1 保存小确幸
- **接口**：`POST /api/diaries`
- **请求体**：`{ "content": "日记内容" }`
- **响应**：`{ "success": true, "message": "保存成功" }`

### 5.2 查看历史小确幸
- **接口**：`POST /api/diaries/history`
- **请求体**：`{ "password": "密码" }`
- **响应**：`{ "success": true, "data": [日记列表] }` 或 `{ "success": false, "message": "密码错误" }`

### 5.3 树洞倾诉
- **接口**：`POST /api/treehole/send`
- **请求体**：`{ "content": "倾诉内容" }`
- **响应**：`{ "success": true, "message": "已成功倾诉" }` 或 `{ "success": false, "message": "发送失败" }`

## 六、SMTP邮件配置

### 6.1 需要配置的信息
- SMTP服务器地址（QQ邮箱：smtp.qq.com）
- SMTP端口（QQ邮箱：465或587）
- 发件人邮箱（用于发送的QQ邮箱）
- 发件人邮箱授权码（非密码，需要在QQ邮箱设置中生成）
- 收件人邮箱（您的QQ邮箱）

### 6.2 邮件格式
- **主题**：树洞倾诉 - [时间戳]
- **内容**：倾诉的具体内容

## 七、部署方案

### 7.1 本地开发
- 使用Node.js在本地运行
- SQLite数据库文件存储在本地

### 7.2 云端部署（可选）
- 可部署到 **Heroku**、**Vercel**、**Railway** 等平台
- 数据库可使用 **MongoDB Atlas**、**PlanetScale** 等云数据库

## 八、安全考虑

1. **密码验证**：查看历史时需要密码验证
2. **输入验证**：对用户输入进行基本的验证和清理
3. **SMTP安全**：使用SSL/TLS加密连接
4. **CORS配置**：配置适当的跨域策略

## 九、项目文件结构

```
liwu/
├── frontend/
│   ├── index.html          # 主页面
│   ├── css/
│   │   └── style.css       # 样式文件
│   └── js/
│       └── app.js          # 前端逻辑
├── backend/
│   ├── server.js           # Express服务器
│   ├── routes/
│   │   ├── diaries.js      # 日记相关路由
│   │   └── treehole.js     # 树洞相关路由
│   ├── config/
│   │   ├── database.js     # 数据库配置
│   │   └── email.js        # 邮件配置
│   └── utils/
│       └── emailService.js # 邮件发送服务
├── database/
│   └── diaries.db          # SQLite数据库文件
├── package.json            # 项目依赖
├── .env                    # 环境变量配置（邮件、密码等）
└── README.md               # 使用说明
```

## 十、开发步骤

1. 搭建前端页面框架和UI
2. 搭建后端Express服务器
3. 实现数据库连接和表结构
4. 实现保存小确幸功能
5. 实现查看历史功能（带密码验证）
6. 实现树洞邮件发送功能
7. 测试所有功能
8. 优化UI和用户体验

## 十一、待确认事项

1. **数据库选择**：SQLite（本地）还是云数据库？
2. **邮件配置**：
   - 您的QQ邮箱地址（收件人）
   - 发件人QQ邮箱地址
   - 发件人QQ邮箱授权码（需要在QQ邮箱设置中生成，非登录密码）
3. **默认密码**：确认默认密码为 `admin888888`，后续是否支持修改密码？
4. **UI细节**：
   - 漂流瓶样式：CSS绘制还是使用图片/图标库？
   - 背景装饰：是否需要背景图案（点点、云朵等）？
   - 动画效果：是否需要额外的动画效果（如保存时的花瓣飘落）？
5. **部署方式**：本地使用还是需要云端部署？
6. **功能增强**（可选）：
   - 历史记录是否需要搜索功能？
   - 历史记录是否需要编辑/删除功能？
   - 草稿自动保存是否需要手动清除功能？

---

**请您确认以上设计方案，如有需要调整的地方请告知，确认后我将开始生成代码。**

