# QQ邮箱SMTP配置说明 📧

## 已配置的邮箱信息

根据您提供的信息，已配置以下邮箱设置：

- **发件人/收件人邮箱**：2330304961@qq.com
- **授权码**：gbedglcqrgsydigi
- **SMTP服务器**：smtp.qq.com
- **SMTP端口**：465（使用SSL）或 587（使用TLS）
- **使用SSL/TLS**：是

## 环境变量配置

在部署到Vercel或本地运行时，需要设置以下环境变量：

```
SMTP_HOST=smtp.qq.com
SMTP_PORT=465
SMTP_USER=2330304961@qq.com
SMTP_PASS=gbedglcqrgsydigi
RECIPIENT_EMAIL=2330304961@qq.com
```

## 本地开发配置

如果要在本地测试，请创建 `.env` 文件（在项目根目录），内容如下：

```env
# SMTP邮件配置
SMTP_HOST=smtp.qq.com
SMTP_PORT=465
SMTP_USER=2330304961@qq.com
SMTP_PASS=gbedglcqrgsydigi
RECIPIENT_EMAIL=2330304961@qq.com

# 其他配置
DIARY_PASSWORD=admin888888
PORT=3000
```

**重要**: `.env` 文件已被添加到 `.gitignore`，不会被提交到Git仓库，保护您的敏感信息。

### 测试邮件配置

创建 `.env` 文件后，可以运行测试脚本验证邮件配置：

```bash
node test-email.js
```

这将发送一封测试邮件到您的邮箱，确认SMTP配置是否正确。

## Vercel部署配置

在Vercel项目设置中，添加以下环境变量：

1. 登录 Vercel 控制台
2. 进入项目设置（Settings）
3. 点击 "Environment Variables"
4. 添加以下变量：

| 变量名 | 值 |
|--------|-----|
| `SMTP_HOST` | `smtp.qq.com` |
| `SMTP_PORT` | `465` |
| `SMTP_USER` | `2330304961@qq.com` |
| `SMTP_PASS` | `gbedglcqrgsydigi` |
| `RECIPIENT_EMAIL` | `2330304961@qq.com` |

## 测试邮件发送

部署完成后，可以测试树洞功能：

1. 访问网站
2. 点击右下角的漂流瓶按钮
3. 输入测试内容
4. 点击"倾诉"按钮
5. 检查邮箱 2330304961@qq.com 是否收到邮件

## 注意事项

⚠️ **重要提醒**：
- 授权码已经配置，请妥善保管，不要泄露
- 如果授权码失效，需要重新在QQ邮箱设置中生成
- 确保QQ邮箱已开启SMTP服务

## QQ邮箱SMTP设置说明（参考）

根据QQ邮箱官方设置：

### SMTP服务器设置
- **发送邮件服务器**：smtp.qq.com
- **端口**：465（SSL）或 587（TLS）
- **需要SSL/TLS**：是

### 认证信息
- **用户名/账户**：完整的QQ邮箱地址（2330304961@qq.com）
- **密码**：授权码（gbedglcqrgsydigi），**不是QQ登录密码**

## 邮件格式

发送的邮件格式：
- **发件人**：树洞倾诉 <2330304961@qq.com>
- **收件人**：2330304961@qq.com
- **主题**：树洞倾诉 - [日期时间]
- **内容**：HTML格式，包含倾诉内容和时间戳

## 故障排查

如果邮件发送失败，请检查：

1. ✅ 授权码是否正确
2. ✅ QQ邮箱是否已开启SMTP服务
3. ✅ 环境变量是否已正确配置
4. ✅ 网络连接是否正常
5. ✅ 检查服务器日志中的错误信息

如有问题，请查看服务器日志或联系技术支持。

