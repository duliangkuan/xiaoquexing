# 自动部署配置说明 🚀

## ✅ 当前状态

您的项目已经连接到GitHub仓库，已启用自动部署功能！

- **GitHub仓库**：https://github.com/duliangkuan/xiaoquexing
- **Vercel项目**：https://vercel.com/duliangkuans-projects/liwu
- **生产环境URL**：https://liwu-rd0ii2mkx-duliangkuans-projects.vercel.app

## 🔄 自动部署流程

### 工作流程

1. **本地修改代码**
2. **提交到Git**
3. **推送到GitHub** → Vercel自动检测并部署

### 自动部署已启用

从之前的部署输出可以看到：
```
> Connecting GitHub repository: https://github.com/duliangkuan/xiaoquexing
> Connected
```

这表示GitHub仓库已连接到Vercel，**自动部署功能已启用**！

## 📝 使用自动部署

### 日常更新代码流程

```bash
# 1. 进入项目目录
cd C:\Users\23303\OneDrive\Desktop\liwu

# 2. 修改代码后，添加到暂存区
git add .

# 3. 提交更改
git commit -m "更新说明"

# 4. 推送到GitHub（会自动触发Vercel部署）
git push origin main
```

### 推送到GitHub后

1. **Vercel自动检测**推送
2. **自动开始构建**（约2-3分钟）
3. **部署到生产环境**
4. **发送通知**（如果在Vercel设置中启用了通知）

### 查看部署状态

1. **在Vercel网站上查看**
   - 访问：https://vercel.com/duliangkuans-projects/liwu
   - 查看 "Deployments" 标签页

2. **使用Vercel CLI查看**
   ```bash
   vercel ls
   ```

3. **查看部署日志**
   ```bash
   vercel inspect <deployment-url> --logs
   ```

## ⚙️ 验证自动部署

### 测试自动部署功能

1. **创建一个测试更改**
   ```bash
   cd C:\Users\23303\OneDrive\Desktop\liwu
   # 编辑README.md，添加一行测试内容
   echo "## 自动部署测试 $(Get-Date)" >> README.md
   ```

2. **提交并推送**
   ```bash
   git add README.md
   git commit -m "测试自动部署"
   git push origin main
   ```

3. **查看Vercel部署**
   - 访问：https://vercel.com/duliangkuans-projects/liwu
   - 在几秒钟内应该能看到新的部署开始

## 🔧 配置选项

### 在Vercel网站上配置

1. **访问项目设置**
   - https://vercel.com/duliangkuans-projects/liwu/settings

2. **Git配置**
   - 在 "Git" 标签页中可以看到连接的仓库
   - 可以配置部署分支（默认：main/master）

3. **部署设置**
   - **Production Branch**：`main`（主分支）
   - **Auto-deploy**：已启用（自动部署）
   - **Preview Deployments**：已启用（预览部署）

### 部署分支设置

默认情况下：
- **Production**：推送到 `main` 分支自动部署到生产环境
- **Preview**：推送到其他分支自动创建预览部署

## 📋 部署触发器

### 自动触发部署的情况

✅ **推送到GitHub仓库**
```bash
git push origin main
```

✅ **合并Pull Request**
- 合并PR到main分支时自动部署

✅ **手动触发**
- 在Vercel网站上点击 "Redeploy"

❌ **不会自动部署的情况**
- 本地提交但未推送
- 推送到非main分支（会创建预览部署）

## 🔔 部署通知

### 配置通知

1. 访问 Vercel 项目设置
2. 点击 "Integrations" 或 "Notifications"
3. 配置通知方式：
   - Email（邮件）
   - Slack
   - Discord
   - 等

## 🐛 故障排查

### 自动部署不工作

1. **检查GitHub连接**
   - 访问：https://vercel.com/duliangkuans-projects/liwu/settings/git
   - 确认仓库已连接

2. **检查推送是否成功**
   ```bash
   git push origin main
   # 应该能看到推送成功的消息
   ```

3. **检查Vercel部署日志**
   - 访问：https://vercel.com/duliangkuans-projects/liwu
   - 查看 "Deployments" 标签页
   - 检查是否有失败的部署

4. **重新连接仓库**
   ```bash
   # 在Vercel网站上断开并重新连接GitHub仓库
   ```

### 部署失败

1. **查看部署日志**
   - 在Vercel项目页面点击失败的部署
   - 查看 "Build Logs" 或 "Function Logs"

2. **常见问题**
   - 依赖安装失败 → 检查 `package.json`
   - 环境变量未配置 → 检查环境变量设置
   - 代码错误 → 检查构建日志

## 📝 常用命令

### Git操作（触发自动部署）

```bash
# 查看状态
git status

# 添加所有更改
git add .

# 提交更改
git commit -m "更新说明"

# 推送到GitHub（触发自动部署）
git push origin main
```

### Vercel CLI操作

```bash
# 查看项目列表
vercel ls

# 查看部署列表
vercel inspect <url>

# 手动部署生产环境
vercel --prod

# 查看日志
vercel logs --follow
```

## ✅ 最佳实践

1. **提交前测试**
   - 本地测试确保代码正常工作
   - 检查 `npm start` 是否能正常运行

2. **提交信息清晰**
   - 使用有意义的提交信息
   - 例如：`git commit -m "添加删除日记功能"`

3. **小步提交**
   - 经常提交，每次提交一个功能
   - 便于回滚和排查问题

4. **查看部署结果**
   - 推送后查看Vercel部署状态
   - 部署完成后测试网站功能

## 🎉 完成！

现在您的项目已配置好自动部署功能。只需：

```bash
git add .
git commit -m "更新说明"
git push origin main
```

Vercel会自动检测并部署您的更改！

---

**提示**：如果首次部署失败，可能需要配置环境变量。参考 `环境变量配置说明.md`。

